<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Linux on ÁßãÊ∞¥¬∑JamesNULLiu</title><link>https://jamesnulliu.github.io/tags/linux/</link><description>Recent content in Linux on ÁßãÊ∞¥¬∑JamesNULLiu</description><generator>Hugo -- 0.148.2</generator><language>en</language><copyright>2024-2025 JamesNULLiu</copyright><lastBuildDate>Fri, 12 Sep 2025 22:14:12 +0000</lastBuildDate><atom:link href="https://jamesnulliu.github.io/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>WSL is All You Need</title><link>https://jamesnulliu.github.io/blogs/wsl-is-all-you-need/</link><pubDate>Fri, 10 Jan 2025 13:25:00 +0800</pubDate><guid>https://jamesnulliu.github.io/blogs/wsl-is-all-you-need/</guid><description>How do I work with WSL</description><content:encoded><![CDATA[<h2 id="1-motivation">1. Motivation</h2>
<p>Coding on Windows feels like a nightmare, but most games do not run on Linux, and I hate MacOS ü§¢ü§Æ from many aspects.</p>
<p>After trying many ways, now I firmly believe that WSL (as a Docker launcher ü§£) is the best solution if:</p>
<ul>
<li>You are a programmer specifically relying on Unix environment, for example, Deep Learning, CUDA, C++, etc.</li>
<li>You are a gamer who wants to play games on Windows.</li>
<li>You want to switch between Linux and Windows with zero cost.</li>
</ul>
<blockquote>
<p>üí°<strong>NOTE</strong><br>
<strong>Windows Subsystem for Linux (WSL)</strong> is a feature of Windows that allows you to run a Linux environment on your Windows machine, without the need for a separate virtual machine or dual booting. WSL is designed to provide a seamless and productive experience for developers who want to use both Windows and Linux at the same time.</p></blockquote>
<h2 id="2-installation">2. Installation</h2>
<blockquote>
<p>Official Doc: <a href="https://learn.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener noreferrer">
    How to install Linux on Windows with WSL
</a>
</p></blockquote>
<blockquote>
<p>‚ö†Ô∏è<strong>WARNING</strong><br>
If you are using scoop on Windows, make sure uninstall it before the first-time installation of a WSL distribution. You can reinstall scoop after the installation.</p></blockquote>
<p>List all available WSL distributions:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-list</span> <span class="p">-</span><span class="n">-online</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Install a specific WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-install</span> <span class="n">-d</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Run a WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="n">-d</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-change-the-storage-location-of-a-distribution">3. Change the Storage Location of a Distribution</h2>
<p>List installed WSL distributions:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="n">-l</span> <span class="n">-v</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Shutdown WSL service:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-shutdown</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Export a WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-export</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nb">path-to</span><span class="n">-exported-tar</span><span class="p">&gt;.</span><span class="py">tar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Unregister the target WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wslconfig</span> <span class="p">/</span><span class="n">u</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Import a WSL distribution from tar and specify the storage location; Note that you can specify any new distro name here:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-import</span> <span class="p">&lt;</span><span class="nb">new-distro</span><span class="n">-name</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nb">path-to</span><span class="n">-the-new-storage-dir</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nb">path-to</span><span class="n">-exported-tar</span><span class="p">&gt;.</span><span class="py">tar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>After importing, the default user of <code>&lt;new-distro-name&gt;</code> would become <code>root</code>. You can set the default user for a WSL distribution by modifying the <code>/etc/wsl.conf</code> file. See <a href="#7-default-user">
    7. Default User
</a>
.</p>
<h2 id="4-work-with-vscode">4. Work with VSCode</h2>
<p>Run a WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="n">-d</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Open a directory in WSL with VSCode:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">code</span> <span class="p">&lt;</span><span class="nb">path-to</span><span class="n">-a-directory-in-wsl</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-install-docker-in-wsl">5. Install Docker in WSL</h2>
<p><del>I don&rsquo;t like Docker Desktop for Windows</del>. Instead, you can install Docker in WSL as you do in a normal Linux system.</p>
<p>If you want to play with cuda and deep learning in your WSL, see this blog: <a href="/blogs/docker-container-with-nvidia-gpu-support" target="_blank" rel="noopener noreferrer">
    Docker Container with Nvidia GPU Support
</a>
</p>
<p>If you need a concise mannual for docker images and containers, see this blog: <a href="/blogs/something-about-docker" target="_blank" rel="noopener noreferrer">
    Something about Docker
</a>
</p>
<p>To open a directory inside a running container with VSCode, install extension <code>ms-vscode-remote.remote-containers</code>, and:</p>
<ol>
<li>Open a directory in a WSL (where you installed docker and ran containers) with VSCode following <a href="#4-work-with-vscode">
    4. Work with VSCode
</a>
.</li>
<li>Press <code>ctrl</code> + <code>shift</code> + <code>p</code>, search for command &ldquo;Dev Containers: Attach to Running Container&hellip;&rdquo;.</li>
<li>Choose and click the container you want to open.</li>
<li>That&rsquo;s it.</li>
</ol>
<h2 id="6-proxy">6. Proxy</h2>
<p>Somethimes you may need to set the proxy for your subsystem.</p>
<p>From my experience, the easiest way is to turn on <code>System Proxy</code> and <code>TUN Mode</code> in clash or v2ray on windows, and your WSL and the running containers will automatically use the proxy.</p>
<h2 id="7-default-user">7. Default User</h2>
<p>You can set the default user for a WSL distribution by modifying the <code>/etc/wsl.conf</code> file.</p>
<p>First, login to a WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="n">-d</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then, create or modify the <code>/etc/wsl.conf</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/wsl.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add the following lines to the file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[user]</span>
</span></span><span class="line"><span class="cl"><span class="na">default</span><span class="o">=</span><span class="s">&lt;your-username&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="8-hostname">8. Hostname</h2>
<p>You can set the hostname for a WSL distribution by modifying the <code>/etc/hostname</code> file.</p>
<p>First, login to a WSL distribution:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="n">-d</span> <span class="p">&lt;</span><span class="nb">distro-name</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then, create or modify the <code>/etc/wsl.conf</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo vim /etc/wsl.conf
</span></span></code></pre></div><p>Add the following lines to the file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[network]</span>
</span></span><span class="line"><span class="cl"><span class="na">hostname</span> <span class="o">=</span> <span class="s">&lt;your-hostname&gt;</span>
</span></span></code></pre></div><h2 id="9-compress-the-wsl-file-system">9. Compress the WSL File System</h2>
<blockquote>
<p>Virtual disk files will grow automatically as you add files, but they will not shrink automatically when you delete files. This can lead to a large virtual disk file that takes up a lot of space on your hard drive.</p></blockquote>
<p>First, search for a <code>.vdhx</code> file in your computer, which is the virtual disk file for your WSL distribution. The default location is &ldquo;C:/Users/&lt;your-username&gt;/AppData/Local/wsl/&lt;hash-value&gt;/ext4.vhdx&rdquo;.</p>
<p>Then, run the following command in PowerShell:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">wsl</span> <span class="p">-</span><span class="n">-shutdown</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>After that, run <code>diskpart</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">diskpart</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>In the pop-up window, run the following commands:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="nb">select </span><span class="n">vdisk</span> <span class="n">file</span><span class="p">=</span><span class="s2">&#34;&lt;path-to-your-vhdx-file&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">compact</span> <span class="n">vdisk</span>
</span></span><span class="line"><span class="cl"><span class="n">detach</span> <span class="n">vdisk</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded></item><item><title>Environment Variable Management on Linux</title><link>https://jamesnulliu.github.io/blogs/environment-variable-management-on-linux/</link><pubDate>Wed, 31 Jul 2024 14:51:00 +0800</pubDate><guid>https://jamesnulliu.github.io/blogs/environment-variable-management-on-linux/</guid><description>An easy way to manage environment variables on Linux using load and unload.</description><content:encoded><![CDATA[<p>Open <code>~/.bashrc</code> file.</p>
<p>Create 2 functions to load and unload environment variables:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">env_load<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">env_var</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">path</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;:</span><span class="si">${</span><span class="p">!env_var</span><span class="si">}</span><span class="s2">:&#34;</span> !<span class="o">=</span> *<span class="s2">&#34;:</span><span class="nv">$path</span><span class="s2">:&#34;</span>* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">export</span> <span class="nv">$env_var</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="p">!env_var</span><span class="si">}</span><span class="s2">:</span><span class="nv">$path</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">env_unload<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">env_var</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">path</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">paths_array</span><span class="o">=(</span><span class="si">${</span><span class="p">!env_var//:/ </span><span class="si">}</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">local</span> <span class="nv">new_paths</span><span class="o">=()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> item in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">paths_array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34;</span><span class="nv">$item</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$path</span><span class="s2">&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nv">new_paths</span><span class="o">+=(</span><span class="s2">&#34;</span><span class="nv">$item</span><span class="s2">&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span>
</span></span><span class="line"><span class="cl">    <span class="nb">export</span> <span class="nv">$env_var</span><span class="o">=</span><span class="k">$(</span><span class="nv">IFS</span><span class="o">=</span>:<span class="p">;</span> <span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">new_paths</span><span class="p">[*]</span><span class="si">}</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now, you can use <code>env_load</code> and <code>env_unload</code> to manage environment variables.</p>
<p>For example, to manage CUDA environment, add these lines to <code>~/.bashrc</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">CUDA_HOME</span><span class="o">=</span><span class="s2">&#34;/usr/local/cuda-12.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">LOAD_CUDA</span><span class="o">=</span><span class="s2">&#34;env_load PATH </span><span class="nv">$CUDA_HOME</span><span class="s2">/bin; env_load LD_LIBRARY_PATH </span><span class="nv">$CUDA_HOME</span><span class="s2">/lib64&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">alias</span> <span class="nv">UNLOAD_CUDA</span><span class="o">=</span><span class="s2">&#34;env_unload PATH </span><span class="nv">$CUDA_HOME</span><span class="s2">/bin; env_unload LD_LIBRARY_PATH </span><span class="nv">$CUDA_HOME</span><span class="s2">/lib64&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="related-blogs">Related Blogs</h2>
<ul>
<li><a href="/blogs/user-management-on-linux" target="_blank" rel="noopener noreferrer">
    User Management on Linux
</a>
</li>
</ul>
]]></content:encoded></item><item><title>User Management on Linux</title><link>https://jamesnulliu.github.io/blogs/user-management-on-linux/</link><pubDate>Sat, 06 Jul 2024 07:04:00 +0800</pubDate><guid>https://jamesnulliu.github.io/blogs/user-management-on-linux/</guid><description>Some useful commands for user management on Linux.</description><content:encoded><![CDATA[<h2 id="1-list-add-and-remove-a-user">1. List, Add and Remove a User</h2>
<p>List all users:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /etc/passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add a new user:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># - `-m`: Creates the user&#39;s home directory.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># - `-s`: Specifies the user&#39;s login shell.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># - `-c`: Provides a comment, typically the user&#39;s full name.</span>
</span></span><span class="line"><span class="cl">useradd -m -s /bin/bash -c <span class="s2">&#34;&lt;full-name&gt;&#34;</span> &lt;username&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set password after the user is created</span>
</span></span><span class="line"><span class="cl">passwd &lt;username&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Remove an existing user:</p>
<p>Remove the user from the sudo or wheel group (if they were in) before deleting them:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gpasswd -d &lt;username&gt; sudo
</span></span><span class="line"><span class="cl">gpasswd -d &lt;username&gt; wheel
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># `-r`: Removes the user&#39;s home directory and mail spool.</span>
</span></span><span class="line"><span class="cl">userdel -r &lt;username&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="2-change-the-password-of-a-user">2. Change the Password of a User</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd &lt;username&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-superuser">3. Superuser</h2>
<p>Grant write permission to <code>/etc/sudoers</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod u+w /etc/sudoers
</span></span></code></pre></td></tr></table>
</div>
</div><p>There are four ways to make a user a superuser:</p>
<ol>
<li>Add <code>&lt;username&gt; ALL=(ALL:ALL) ALL</code> to the end of the file <code>/etc/sudoers</code>. This allows the user to execute any command with prefix <code>sudo</code> after entering the password.</li>
<li>Add <code>&lt;username&gt; ALL=(ALL:ALL) NOPASSWD: ALL</code> to the end of the file <code>/etc/sudoers</code>. This allows the user to execute any command with prefix <code>sudo</code> without entering the password.</li>
<li>Add <code>%&lt;groupname&gt; ALL=(ALL:ALL) ALL</code> to the end of the file <code>/etc/sudoers</code>. This allows all users in the group to execute any command with prefix <code>sudo</code> after entering the password.</li>
<li>Add <code>%&lt;groupname&gt; ALL=(ALL:ALL) NOPASSWD: ALL</code> to the end of the file <code>/etc/sudoers</code>. This allows all users in the group to execute any command with prefix <code>sudo</code> without entering the password.</li>
</ol>
<p>Return the file <code>/etc/sudoers</code> to read-only mode:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod u-w /etc/sudoers
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-user-groups">4. User Groups</h2>
<p>List all user groups:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /etc/group
</span></span></code></pre></td></tr></table>
</div>
</div><p>List the groups a user is in:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">groups &lt;username&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Create a new group:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">groupadd &lt;groupname&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add a user to a group:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gpasswd -a &lt;username&gt; &lt;groupname&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Remove a user from a group:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gpasswd -d &lt;username&gt; &lt;groupname&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5-onwership-and-permission-of-files-and-directories">5. Onwership and Permission of Files and Directories</h2>
<p>To check the owership and the permission of a file or directory:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># File:</span>
</span></span><span class="line"><span class="cl">ls -l &lt;filename&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># Directory:</span>
</span></span><span class="line"><span class="cl">ls -ld &lt;dirname&gt;
</span></span><span class="line"><span class="cl"><span class="c1"># List all files including the hidden ones</span>
</span></span><span class="line"><span class="cl">ls -la
</span></span></code></pre></td></tr></table>
</div>
</div><p>Output example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Permision|*|owner|group|bytes|   date    |file/dirname</span>
</span></span><span class="line"><span class="cl">drwxr-xr-x  <span class="m">2</span> james james <span class="m">4096</span>  Dec <span class="m">2</span> 11:02 example-dir/
</span></span><span class="line"><span class="cl"><span class="c1"># *: Number of subdirectories.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    If file, usually starts at 1; Numbers higher than 1 indicate how many hard </span>
</span></span><span class="line"><span class="cl"><span class="c1">#    links point to this file.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#    If directory, the minimum value is 2 (&#34;.&#34; and &#34;..&#34;).</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>To break down <code>drwxr-xr-x</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">d | rwx | r-x | r-x
</span></span><span class="line"><span class="cl">‚Üì   ‚Üì     ‚Üì     ‚Üì
</span></span><span class="line"><span class="cl">|   |     |     ‚îî‚îÄ‚îÄ Others permissions (last 3 chars), 101=5
</span></span><span class="line"><span class="cl">|   |     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Group permissions (middle 3), 101=5
</span></span><span class="line"><span class="cl">|   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Owner permissions (first 3), 111=7
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ File type, d = directory; - = regular file; l = symbolic 
</span></span><span class="line"><span class="cl">                    link; b = block device; c = character device
</span></span></code></pre></td></tr></table>
</div>
</div><p>To change the ownership:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chown <span class="o">[</span>-R<span class="o">]</span> &lt;user&gt;:&lt;group&gt; &lt;filename/dirname&gt;
</span></span><span class="line"><span class="cl">chown <span class="o">[</span>-R<span class="o">]</span> :&lt;group&gt; &lt;filename/dirname&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>To change the permission using numeric mode:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod <span class="o">[</span>-R<span class="o">]</span> <span class="m">764</span> &lt;filename/dirname&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Where:</p>
<ul>
<li><code>7=0b100+0b010+0b001</code>, owner can Read Write Execute.</li>
<li><code>6=0b100+0b010+0b000</code>, group can Read Write.</li>
<li><code>4=0b100+0b000+0b000</code>, other can Read.</li>
</ul>
<p>To change the permission using symbolic mode:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +r foldername       <span class="c1"># Add read for everyone</span>
</span></span><span class="line"><span class="cl">chmod a+r foldername      <span class="c1"># Add read for everyone</span>
</span></span><span class="line"><span class="cl">chmod u+r foldername      <span class="c1"># Add read for owner only</span>
</span></span><span class="line"><span class="cl">chmod g+r foldername      <span class="c1"># Add read for group only</span>
</span></span><span class="line"><span class="cl">chmod o+r foldername      <span class="c1"># Add read for others only</span>
</span></span><span class="line"><span class="cl">chmod a-rwx file          <span class="c1"># Remove all permissions from all</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6-shared-directory">6. Shared Directory</h2>
<p>To create a shared directory for all users in the same group being able to create, modify, execute, and delete files:</p>
<details class="custom-details">
    <summary class="custom-summary">Click to see file: create-shared-dir</summary>
    <div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># =============================================================================</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Script: create-shared-dir</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Description: Configures one or more directories to be shared with a specific</span>
</span></span><span class="line"><span class="cl"><span class="c1">#              group.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># It performs the following actions on each target directory:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   1. Creates the directory if it doesn&#39;t exist.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   2. Recursively sets the group ownership.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   3. Sets permissions (group: rwx, others: none).</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   4. Sets the &#39;setgid&#39; bit on subdirectories to enforce group inheritance.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   5. Uses Access Control Lists (ACLs) to enforce permissions for new items.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Usage:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   sudo create-shared-dir &lt;shared_group&gt; &lt;dir1&gt; [&lt;dir2&gt; ...]</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Example:</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   sudo create-shared-dir developers /srv/data /home/shared/project</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># =============================================================================</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --- Argument Parsing ---</span>
</span></span><span class="line"><span class="cl"><span class="nv">SHARED_GROUP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">shift</span> <span class="c1"># Shift arguments so $@ contains only the directories</span>
</span></span><span class="line"><span class="cl"><span class="nv">TARGET_DIRS</span><span class="o">=(</span><span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --- Input Validation ---</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="si">${#</span><span class="nv">TARGET_DIRS</span><span class="p">[@]</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;-h&#34;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;--help&#34;</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Usage: </span><span class="nv">$0</span><span class="s2"> &lt;shared_group&gt; &lt;dir1&gt; [&lt;dir2&gt; ...]&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Example: </span><span class="nv">$0</span><span class="s2"> developers /var/www/project_a&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --- Pre-flight Checks ---</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 1. Check for root privileges.</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> <span class="nv">$EUID</span> -ne <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Error: This script must be run as root (or with sudo).&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. Check if the specified group exists.</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> ! getent group <span class="s2">&#34;</span><span class="nv">$SHARED_GROUP</span><span class="s2">&#34;</span> &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;Error: Group &#39;</span><span class="nv">$SHARED_GROUP</span><span class="s2">&#39; does not exist.&#34;</span> &gt;<span class="p">&amp;</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">    <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># --- Main Logic ---</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Configuring shared directories for group &#39;</span><span class="nv">$SHARED_GROUP</span><span class="s2">&#39;...&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> target_dir in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">TARGET_DIRS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;--&gt; Processing: </span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    mkdir -p <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    chgrp -R <span class="s2">&#34;</span><span class="nv">$SHARED_GROUP</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    chmod -R <span class="nv">g</span><span class="o">=</span>rwX,o-rwx <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    find <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span> -type d -exec chmod g+s <span class="o">{}</span> +
</span></span><span class="line"><span class="cl">    setfacl -R -m <span class="s2">&#34;g:</span><span class="nv">$SHARED_GROUP</span><span class="s2">:rwX&#34;</span> <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    setfacl -R -d -m <span class="s2">&#34;g:</span><span class="nv">$SHARED_GROUP</span><span class="s2">:rwX&#34;</span> <span class="s2">&#34;</span><span class="nv">$target_dir</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Configuration complete.&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</details><br>
<p>You may put the file to &ldquo;/usr/local/bin/create-shared-dir&rdquo;, and then change its mode with command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">chmod +x /usr/local/bin/create-shared-dir
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then you can run the script with the desired parameters, for example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo create-shared-dir developers /srv/data /home/shared/project
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="related-blogs">Related Blogs</h2>
<ul>
<li><a href="/blogs/environment-variable-management-on-linux/">Environment Varialble Management on Linux</a></li>
</ul>
]]></content:encoded></item><item><title>Turn off The Buzzer</title><link>https://jamesnulliu.github.io/blogs/turn-off-the-buzzer/</link><pubDate>Sat, 06 Jul 2024 06:41:00 +0800</pubDate><guid>https://jamesnulliu.github.io/blogs/turn-off-the-buzzer/</guid><description>How to close the buzzer on Linux?</description><content:encoded><![CDATA[<p>The buzzer is a small speaker that emits a beep sound. It is used to notify the user of system events. However, sometimes the beep sound is annoying. To close the buzzer on Linux system, execute the following command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo bash -c <span class="s2">&#34;echo blacklist pcspkr &gt; /etc/modprobe.d/blacklist-pcspkr.conf&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Reboot</span>
</span></span><span class="line"><span class="cl">sudo reboot
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded></item></channel></rss>